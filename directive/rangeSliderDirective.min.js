!function(n,e){"use strict";n.module("app").directive("rangeSlider",["$window",function a(i){return{restrict:"E",replace:!0,scope:{config:"=?",model:"="},controller:["$scope",function l(a){a.iter=function i(n){return e.range(0,n)},a._supportDebounce=function l(){return n.isDefined(e)&&"function"==typeof e.debounce},a._notInRunLoop=function s(){return!a.$root.$$phase}}],template:'<div class="range-slider {{config.style}}"><div class="range-slider-label" ng-if="config.labels.show"><span class="min-prefix">{{config.labels.minPrefix}}</span> <span class="min-value" ng-show="config.labels.values">{{config.min}}</span> <span class="min-suffix">{{config.labels.minSuffix}}</span></div><div class="range-slider-set" ng-class="{\'range-slider-bg\': !config.span.min || !config.span.gap || !config.span.max}"><div class="range-slider-span-min" ng-if="config.span.min" style="left:0;right:{{(100 - _handleMinX)}}%"></div><div class="range-slider-span-gap" ng-if="config.span.gap" style="left:{{_handleMinX}}%;right:{{(100 - _handleMaxX)}}%"></div><div class="range-slider-span-max" ng-if="config.span.max" style="left:{{_handleMaxX}}%;right:0"></div><input class="exclude" type="range" ng-change="_which=0" ng-model="_model[0]" min="{{_values.min}}" max="{{_values.max}}" step="{{_step}}" /><input class="exclude" type="range" ng-change="_which=1" ng-model="_model[1]" min="{{_values.min}}" max="{{_values.max}}" step="{{_step}}" /><div class="range-slider-handle-min" ng-if="config.handles.show" style="left:{{_handleMinX}}%"><span class="min-prefix">{{config.handles.minPrefix}}</span> <span class="min-value" ng-show="config.handles.values">{{_model[0]}}</span> <span class="min-suffix">{{config.handles.minSuffix}}</span></div><div class="range-slider-handle-max" ng-if="config.handles.show" style="left:{{_handleMaxX}}%"><span class="max-prefix">{{config.handles.maxPrefix}}</span> <span class="max-value" ng-show="config.handles.values">{{_model[1]}}</span> <span class="max-suffix">{{config.handles.maxSuffix}}</span></div></div><div class="range-slider-label" ng-if="config.labels.show"><span class="max-prefix">{{config.labels.maxPrefix}}</span> <span class="max-value" ng-show="config.labels.values">{{config.max}}</span> <span class="max-suffix">{{config.labels.maxSuffix}}</span></div></div>',link:function s(a,l){var s={min:0,max:100,gap:1,step:.5,debounce:0,style:"",labels:{show:!0,values:!0,minPrefix:"",minSuffix:"",maxPrefix:"",maxSuffix:""},handles:{show:!0,values:!0,minPrefix:"",minSuffix:"",maxPrefix:"",maxSuffix:""},span:{min:!1,gap:!0,max:!1}};a.config=$.extend(!0,n.copy(s),a.config),a._model=[a.model.from,a.model.to],a._values={min:a.config.min||0,max:a.config.max||100},a._labels={min:a.config.labels.min||a._values.min,max:a.config.labels.max||a._values.max},a._step=a.config.step||1,a._gap=i.parseFloat(a.config.gap)||0,a._debounce=i.parseInt(a.config.debounce),a._which=0;var o=function(){var i=l.find("input");e.each(i,function(e,i){e=n.element(e),e.val(a._model[i])})},m=function c(e){if(n.isArray(a.model)?a.model=[e[0],e[1]]:a.model={from:e[0],to:e[1]},a._handleMinX=(a._model[0]-a._values.min)/(a._values.max-a._values.min)*100,a._handleMaxX=(a._model[1]-a._values.min)/(a._values.max-a._values.min)*100,a._handleMinX=a._handleMinX<0?0:a._handleMinX,a._handleMaxX=a._handleMaxX>100?100:a._handleMaxX,a._notInRunLoop())try{a.$apply()}catch(i){}};a._debounce&&a._supportDebounce()&&(m=e.debounce(m,a._debounce)),a.$watch("config",function(e,i){a.config=$.extend(!0,n.copy(s),a.config),e&&i&&e!==i&&(a.config.min=parseFloat(a.config.min),a.config.max=parseFloat(a.config.max),a.config.gap=parseFloat(a.config.gap),a.config.gap>a.config.max-a.config.min&&(a.config.gap=a.config.max-a.config.min),a.config.step=parseFloat(a.config.step),a.config.debounce=parseInt(a.config.debounce),a._gap=a.config.gap,a._step=a.config.step,a._debounce=a.config.debounce,a._values={min:a.config.min||0,max:a.config.max||100},a._labels={min:a.config.labels.min||a._values.min,max:a.config.labels.max||a._values.max},o())},!0),a.$watch("model",function f(){a._model=[a.model.from,a.model.to],o()},!0),a.$watchCollection("_model",function d(){a._model[0]=i.parseFloat(a._model[0]),a._model[1]=i.parseFloat(a._model[1]),0===a._which&&a._model[1]-a._gap<a._model[0]&&(a._model[1]=a._model[0]+a._gap),1===a._which&&a._model[0]+a._gap>a._model[1]&&(a._model[0]=a._model[1]-a._gap),function n(){a._model[0]<a._values.min&&(a._model[0]=a._values.min),a._model[1]<a._values.min&&(a._model[1]=a._values.min),a._model[0]>a._values.max&&(a._model[0]=a._values.max),a._model[1]>a._values.max&&(a._model[1]=a._values.max);var n=a._model[0]+a._gap,e=a._model[1]-a._gap;a._model[0]>e&&(a._model[0]=e),a._model[1]<n&&(a._model[1]=n)}(),m(a._model),o()})}}}])}(window.angular,window._);